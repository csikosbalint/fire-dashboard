'use client';

import { useState, useEffect } from 'react';
import { X } from 'lucide-react';
import { Input } from '@/components/ui/input';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Skeleton } from '@/components/ui/skeleton';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { useTickers } from '@/hooks/useLocalStore';
import { useSharpeRatios } from '@/hooks/useCalculations';
import { HistoricalData, SharpeResult } from '@/types';

export default function SharpePage() {
  const [tickerInput, setTickerInput] = useState('');
  const [mounted, setMounted] = useState(false);
  const { tickers, addTicker, removeTicker, lookback, setLookback } = useTickers();
  const { calculateSharpe, calculateSharpeFromData } = useSharpeRatios();
  const [results, setResults] = useState<SharpeResult[]>([]);
  const [test, setTest] = useState<SharpeResult[]>([]);
  // Prevent hydration mismatch by only rendering after mount
  useEffect(() => {
    setMounted(true);
    const testdata = [
            1.63051,
            1.636265,
            1.642308,
            1.630788,
            1.635078,
            1.632461,
            1.626431,
            1.626746,
            1.63579,
            1.634252,
            1.632901,
            1.629722,
            1.621834,
            1.620209,
            1.623892,
            1.624837,
            1.616894,
            1.623008,
            1.624246,
            1.631222,
            1.633346,
            1.637018,
            1.638325,
            1.650849,
            1.649245,
            1.651383,
            1.649605,
            1.651687,
            1.647265,
            1.660958,
            1.657866,
            1.660521,
            1.665319,
            1.677719,
            1.685301,
            1.683099,
            1.693021,
            1.691763,
            1.694025,
            1.695416,
            1.697632,
            1.700625,
            1.696418,
            1.688488,
            1.69167,
            1.696803,
            1.715942,
            1.718527,
            1.719294,
            1.71381,
            1.73053,
            1.716927,
            1.705386,
            1.707955,
            1.707568,
            1.699718,
            1.684525,
            1.702728,
            1.696869,
            1.70359,
            1.697849,
            1.694409,
            1.688709,
            1.687456,
            1.684499,
            1.676111,
            1.672886,
            1.672094,
            1.672496,
            1.677338,
            1.681453,
            1.682638,
            1.678294,
            1.678463,
            1.683057,
            1.68955,
            1.695828,
            1.705508,
            1.711021,
            1.712745,
            1.712334,
            1.71266,
            1.711706,
            1.704637,
            1.705073,
            1.704335,
            1.704457,
            1.700059,
            1.696841,
            1.699025,
            1.699056,
            1.699851,
            1.706366,
            1.709267,
            1.711564,
            1.718054,
            1.720325,
            1.731638,
            1.731418,
            1.732729,
            1.734813,
            1.737457,
            1.74014,
            1.740346,
            1.735673,
            1.725645,
            1.733203,
            1.726323,
            1.726132,
            1.724501,
            1.72642,
            1.727262,
            1.727006,
            1.732062,
            1.73253,
            1.731873,
            1.73298,
            1.732003,
            1.731138,
            1.730593,
            1.731595,
            1.729144,
            1.727107,
            1.729104,
            1.725745,
            1.72916,
            1.724935,
            1.723872,
            1.727256,
            1.729545,
            1.730738,
            1.733101,
            1.733096,
            1.729651,
            1.723523,
            1.722359,
            1.724624,
            1.726401,
            1.726333,
            1.727323,
            1.72858,
            1.722022,
            1.723989,
            1.723874,
            1.725798,
            1.729159,
            1.733078,
            1.731754,
            1.732393,
            1.733247,
            1.737513,
            1.73463,
            1.74266,
            1.743539,
            1.747277,
            1.750357,
            1.727895,
            1.730085,
            1.726506,
            1.712967,
            1.713724,
            1.709734,
            1.699269,
            1.690554,
            1.686046,
            1.691696,
            1.680103,
            1.677923,
            1.677047,
            1.669507,
            1.676922,
            1.681165,
            1.677971,
            1.64988,
            1.639227,
            1.64756,
            1.634638,
            1.651476,
            1.642276,
            1.639424,
            1.639315,
            1.641463,
            1.64585,
            1.641241,
            1.646071,
            1.64914,
            1.637527,
            1.643752,
            1.630715,
            1.635927,
            1.633858,
            1.631634,
            1.635127,
            1.633206,
            1.639268,
            1.641681,
            1.635291,
            1.637987,
            1.638371,
            1.639942,
            1.638975,
            1.6417,
            1.641001,
            1.640723,
            1.636343,
            1.641328,
            1.661246,
            1.667659,
            1.6664,
            1.668654,
            1.672005,
            1.680611,
            1.687183,
            1.696326,
            1.684728,
            1.682381,
            1.679741,
            1.678253,
            1.681758,
            1.681699,
            1.684203,
            1.682659,
            1.672632,
            1.674162,
            1.684325,
            1.683969,
            1.687889,
            1.693574,
            1.695472,
            1.686738,
            1.69082,
            1.688451,
            1.691713,
            1.698907,
            1.70111,
            1.692032,
            1.654324,
            1.65513,
            1.670297,
            1.667118,
            1.671718,
            1.668825,
            1.667082,
            1.666936,
            1.663924,
            1.660762,
            1.640245,
            1.645884,
            1.647979,
            1.643397,
            1.654112,
            1.655986,
            1.657275,
            1.654635,
            1.654147,
            1.667407,
            1.654637,
            1.648175,
            1.654953,
            1.652529,
            1.653674,
            1.656782,
            1.656447,
            1.655772,
            1.654443,
            1.650324,
            1.647434,
            1.652309,
            1.647065,
            1.641798,
            1.636199,
            1.634778,
            1.635696,
            1.62916,
            1.631305,
            1.636681,
            1.638107,
            1.639709,
            1.643914,
            1.643806,
            1.642884,
            1.638564,
            1.639065,
            1.638735,
            1.641372,
            1.641005,
            1.642628,
            1.629251,
            1.625331,
            1.632265,
            1.633081,
            1.628035,
            1.625703,
            1.631166,
            1.639096,
            1.640609,
            1.649258,
            1.655442,
            1.649577,
            1.658188,
            1.655789,
            1.660186,
            1.666005,
            1.655182,
            1.651314,
            1.658239,
            1.663105,
            1.656659,
            1.668701,
            1.67965,
            1.675042,
            1.670894,
            1.649526,
            1.650773,
            1.644135,
            1.643163,
            1.649976,
            1.633068,
            1.649525,
            1.652074,
            1.666379,
            1.670955,
            1.667292,
            1.66447,
            1.681505,
            1.685725,
            1.693021,
            1.707583,
            1.715506,
            1.712651,
            1.724457,
            1.720686,
            1.723255,
            1.727852,
            1.721699,
            1.74726,
            1.749975,
            1.742741,
            1.747361,
            1.743814,
            1.736092,
            1.737038,
            1.749077,
            1.747681,
            1.749242,
            1.775475,
            1.783403,
            1.788745,
            1.7927,
            1.790015,
            1.790072,
            1.788796,
            1.77936,
            1.792902,
            1.787712,
            1.807642,
            1.816041,
            1.820503,
            1.821009,
            1.824296,
            1.824156,
            1.822846,
            1.827425,
            1.830596,
            1.830647,
            1.831999,
            1.827252,
            1.83041,
            1.828867,
            1.814203,
            1.817309,
            1.802109,
            1.803672,
            1.80865,
            1.804525,
            1.801505,
            1.80224,
            1.805687,
            1.803703,
            1.798908,
            1.798635,
            1.791273,
            1.809581,
            1.808439,
            1.816352,
            1.81749,
            1.815683,
            1.81925,
            1.819528,
            1.818724,
            1.819364,
            1.819272,
            1.821302,
            1.823758,
            1.826363,
            1.8276,
            1.831659,
            1.832235,
            1.83233,
            1.834634,
            1.834862,
            1.831498,
            1.835063,
            1.836544,
            1.833588,
            1.840637,
            1.838223,
            1.834944,
            1.835524,
            1.835348,
            1.841772,
            1.848677,
            1.847167,
            1.847456,
            1.853168,
            1.849341,
            1.855517,
            1.870988,
            1.869869,
            1.880281,
            1.87623,
            1.866675,
            1.876739,
            1.881349,
            1.89016,
            1.886351,
            1.890292,
            1.891607,
            1.897293,
            1.903447,
            1.895904,
            1.898425,
            1.897043,
            1.883322,
            1.883922,
            1.894866,
            1.886825,
            1.886605,
            1.858178,
            1.861397,
            1.852677,
            1.866939,
            1.872879,
            1.870241,
            1.871862,
            1.879679,
            1.880327,
            1.872096,
            1.864178,
            1.862916,
            1.848324,
            1.833899,
            1.79449,
            1.831373,
            1.832721,
            1.838517,
            1.839329,
            1.83483,
            1.849854,
            1.86299,
            1.857423,
            1.865941,
            1.863372,
            1.884373,
            1.889906,
            1.902979,
            1.903803,
            1.905423,
            1.901926,
            1.911364,
            1.912379,
            1.895193,
            1.898613,
            1.898949,
            1.900116,
            1.907896,
            1.911463,
            1.907297,
            1.912852,
            1.91478,
            1.919608,
            1.90949,
            1.893494,
            1.905814,
            1.901693,
            1.900571,
            1.894739,
            1.887421,
            1.887263,
            1.899785,
            1.90163,
            1.882573,
            1.877563,
            1.87433,
            1.879106,
            1.892257,
            1.914157,
            1.911957,
            1.909631,
            1.909599,
            1.9009,
            1.907898,
            1.914183,
            1.917026,
            1.917366,
            1.905402,
            1.898047,
            1.903364,
            1.900896,
            1.887699,
            1.888589,
            1.895049,
            1.899216,
            1.900115,
            1.889767,
            1.878366,
            1.864843,
            1.864912,
            1.860301,
            1.866762,
            1.855403,
            1.85545,
            1.853323,
            1.849879,
            1.857797,
            1.859827,
            1.842053,
            1.842594,
            1.844549,
            1.85083,
            1.846209,
            1.850491,
            1.854718,
            1.847708,
            1.853663,
            1.870257,
            1.868366,
            1.863474,
            1.861991,
            1.865664,
            1.868067,
            1.859552,
            1.866568,
            1.863891,
            1.86608,
            1.868661,
            1.861216,
            1.851112,
            1.854251,
            1.868274,
            1.866359,
            1.84738,
            1.834187,
            1.813206,
            1.824853,
            1.817898,
            1.839168,
            1.852477,
            1.865033,
            1.863741,
            1.870771,
            1.83592,
            1.840911,
            1.845225,
            1.859296,
            1.856597,
            1.866088,
            1.868808,
            1.885506,
            1.88617,
            1.898887,
            1.886276,
            1.875867,
            1.857998,
            1.842123,
            1.860733,
            1.85629,
            1.827862,
            1.810024,
            1.804514,
            1.819893,
            1.831422,
            1.831899,
            1.80331,
            1.820168,
            1.797934,
            1.722595,
            1.723857,
            1.752558,
            1.788571,
            1.763722,
            1.785847,
            1.763892,
            1.751223,
            1.745916,
            1.776434,
            1.794519,
            1.797487,
            1.820843,
            1.840859,
            1.85255,
            1.829751,
            1.846394,
            1.823608,
            1.833593,
            1.827976,
            1.814106,
            1.841225,
            1.869053,
            1.855469,
            1.860126,
            1.929357,
            1.927832,
            1.873509,
            1.903623,
            1.876222,
            1.885794,
            1.902476,
            1.86025,
            1.843202,
            1.868333,
            1.858445,
            1.862976,
            1.83904,
            1.807953,
            1.796663,
            1.755437,
            1.752097,
            1.730229,
            1.733007,
            1.739575,
            1.772323,
            1.784727,
            1.823555,
            1.819912,
            1.82976,
            1.833425,
            1.823059,
            1.823036,
            1.804259,
            1.820913,
            1.796261,
            1.792664,
            1.783409,
            1.783857,
            1.779364,
            1.774434,
            1.778769,
            1.77598,
            1.779707,
            1.783126,
            1.783582,
            1.77736,
            1.783767,
            1.784976,
            1.79323,
            1.795258,
            1.795208,
            1.78948,
            1.785351,
            1.788232,
            1.798777,
            1.80011,
            1.807804,
            1.802557,
            1.809932,
            1.813235,
            1.816382,
            1.826452,
            1.829972,
            1.838621,
            1.833981,
            1.838073,
            1.84461,
            1.845521,
            1.841536,
            1.845751,
            1.86079,
            1.861814,
            1.867095,
            1.870576,
            1.866731,
            1.867334,
            1.865288,
            1.853752,
            1.861771,
            1.858621,
            1.866646,
            1.867332,
            1.868317,
            1.870041,
            1.866377,
            1.864225,
            1.865972,
            1.875955,
            1.879417,
            1.88154,
            1.882467,
            1.882117,
            1.88459,
            1.883701,
            1.864427,
            1.865534,
            1.871038,
            1.869877,
            1.868022,
            1.872101,
            1.875602,
            1.872266,
            1.866643,
            1.86832,
            1.863931,
            1.868039,
            1.870224,
            1.867601,
            1.860051,
            1.853099,
            1.853906,
            1.84926,
            1.850072,
            1.844882,
            1.848569,
            1.848502,
            1.839603,
            1.837858,
            1.841252,
            1.835787,
            1.830725,
            1.83344,
            1.829546,
            1.829907,
            1.834024,
            1.821864,
            1.829154,
            1.862225,
            1.860702,
            1.864109,
            1.865115,
            1.861219,
            1.856814,
            1.85959,
            1.852435,
            1.842761,
            1.845073,
            1.846261,
            1.835159,
            1.831912,
            1.825362,
            1.821311,
            1.819676,
            1.815743,
            1.819625,
            1.806996,
            1.807085,
            1.799451,
            1.802678,
            1.783989,
            1.777352,
            1.772736,
            1.774959,
            1.775861,
            1.79026,
            1.805436,
            1.802932,
            1.805934,
            1.802237,
            1.800201,
            1.797983,
            1.814056,
            1.823904,
            1.836551,
            1.842045,
            1.840782,
            1.833136,
            1.826232,
            1.826871,
            1.828656,
            1.828839,
            1.849571,
            1.852688,
            1.860614,
            1.860036,
            1.858135,
            1.851947,
            1.854079,
            1.855529,
            1.858836,
            1.856723,
            1.861845,
            1.865762,
            1.868057,
            1.864529,
            1.86413,
            1.860292,
            1.843154,
            1.84512,
            1.843344,
            1.855505,
            1.863581,
            1.869979,
            1.86791,
            1.86929,
            1.868635,
            1.870547,
            1.884667,
            1.890315,
            1.887726,
            1.893803,
            1.888358,
            1.89317,
            1.893089,
            1.894293,
            1.898366,
            1.896897,
            1.899549,
            1.900101,
            1.901544,
            1.901485,
            1.903486,
            1.903258,
            1.903254,
            1.9051,
            1.90819,
            1.907794,
            1.908195,
            1.912464,
            1.918961,
            1.936169,
            1.939658,
            1.945064,
            1.945553,
            1.944462,
            1.956152,
            1.95614,
            1.952666,
            1.955228,
            1.953518,
            1.956983,
            1.955029,
            1.955799,
            1.95123,
            1.954294,
            1.94966,
            1.95294,
            1.953232,
            1.955499,
            1.958196,
            1.963168,
            1.961236,
            1.962301,
            1.961686,
            1.986901,
            1.990063,
            1.995507,
            2.000435,
            1.999263,
            2.000441,
            2.003354,
            2.003777,
            2.002974,
            2.001523,
            2.001701,
            2.004525,
            2.009082,
            2.013922,
            2.014369,
            2.014611,
            2.014753,
            2.015603,
            2.014908,
            2.014279,
            2.012416,
            2.016134,
            2.015679,
            2.016645,
            2.012071,
            2.008542,
            2.007619,
            2.010246,
            2.012713,
            2.01301,
            2.011322,
            2.008633,
            2.011534,
            2.01642,
            2.014897,
            2.016697,
            2.018459,
            2.020133,
            2.022286,
            2.022684,
            2.025503,
            2.025835,
            2.030616,
            2.031914,
            2.036291,
            2.038472,
            2.041879,
            2.040916,
            2.046378,
            2.05353,
            2.065045,
            2.073518,
            2.075711,
            2.079,
            2.07603,
            2.08117,
            2.081626,
            2.081508,
            2.087706,
            2.0878,
            2.087967,
            2.089952,
            2.093835,
            2.094128,
            2.089933,
            2.088819,
            2.087817,
            2.087844,
            2.091813,
            2.09362,
            2.094374,
            2.093512,
            2.093034,
            2.085874,
            2.091362,
            2.089924,
            2.085873,
            2.090245,
            2.090053,
            2.08073,
            2.085773,
            2.079734,
            2.079838,
            2.082937,
            2.083228,
            2.081189,
            2.076172,
            2.078148,
            2.079586,
            2.079038,
            2.084527,
            2.089582,
            2.0904,
            2.085375,
            2.089423,
            2.092439,
            2.095189,
            2.098785,
            2.095579,
            2.088247,
            2.086987,
            2.0859,
            2.0781,
            2.069745,
            2.074025,
            2.072927,
            2.070342,
            2.073432,
            2.075541,
            2.07329,
            2.072045,
            2.075239,
            2.075697,
            2.076192,
            2.080663,
            2.08687,
            2.095581,
            2.100805,
            2.104229,
            2.104832,
            2.105417,
            2.09718,
            2.097083,
            2.090467,
            2.080554,
            2.08641,
            2.089854,
            2.090641,
            2.097134,
            2.10161,
            2.1016,
            2.099458,
            2.104342,
            2.107131,
            2.111302,
            2.11272,
            2.116965,
            2.120519,
            2.119541,
            2.11807,
            2.117742,
            2.117439,
            2.118343,
            2.123105,
            2.125805,
            2.123098,
            2.132318,
            2.125699,
            2.123062,
            2.121591,
            2.123321,
            2.113057,
            2.107716,
            2.109946,
            2.093513,
            2.103747,
            2.102593,
            2.092627,
            2.102342,
            2.106238,
            2.096929,
            2.098782,
            2.103208,
            2.116915,
            2.10412,
            2.095463,
            2.098047,
            2.077149,
            2.071906,
            2.059809,
            2.062469,
            2.074238,
            2.082975,
            2.087061,
            2.091924,
            2.093696,
            2.083446,
            2.098835,
            2.106515,
            2.104799,
            2.105648,
            2.101262,
            2.088662,
            2.095717,
            2.110568,
            2.114886,
            2.125623,
            2.130126,
            2.127918,
            2.129454,
            2.132468,
            2.134818,
            2.134462,
            2.129793,
            2.128055,
            2.132405,
            2.130859,
            2.133326,
            2.136426,
            2.136509,
            2.134145,
            2.135957,
            2.147337,
            2.150952,
            2.156888,
            2.159174,
            2.157831,
            2.154057,
            2.152513,
            2.146812,
            2.147017,
            2.145833,
            2.14864,
            2.139087,
            2.141704,
            2.146302,
            2.146447,
            2.151037,
            2.150646,
            2.152331,
            2.156875,
            2.154861,
            2.158734,
            2.162301,
            2.170317,
            2.169418,
            2.1715,
            2.180051,
            2.179587,
            2.179102,
            2.184214,
            2.178816,
            2.179078,
            2.182199,
            2.193326,
            2.190929,
            2.186814,
            2.183101,
            2.192014,
            2.190767,
            2.193968,
            2.196256,
            2.197827,
            2.196478,
            2.20157,
            2.211725,
            2.211525,
            2.216076,
            2.219037,
            2.22027,
            2.221156,
            2.221948,
            2.227911,
            2.229016,
            2.229015,
            2.232741,
            2.23439,
            2.234948,
            2.233667,
            2.234167,
            2.239833,
            2.241495,
            2.240884,
            2.238452,
            2.238611,
            2.236986,
            2.235818,
            2.235103,
            2.23475,
    ]
    const testdates = [
      '5-28-2009',
      '5-29-2009',
      '6-2-2009',
      '6-3-2009',
      '6-4-2009',
      '6-5-2009',
      '6-8-2009',
      '6-9-2009',
      '6-10-2009',
      '6-11-2009',
      '6-12-2009',
      '6-15-2009',
      '6-16-2009',
      '6-17-2009',
      '6-18-2009',
      '6-19-2009',
      '6-22-2009',
      '6-23-2009',
      '6-24-2009',
      '6-25-2009',
      '6-26-2009',
      '6-29-2009',
      '6-30-2009',
      '7-1-2009',
      '7-2-2009',
      '7-3-2009',
      '7-6-2009',
      '7-7-2009',
      '7-8-2009',
      '7-9-2009',
      '7-10-2009',
      '7-13-2009',
      '7-14-2009',
      '7-15-2009',
      '7-16-2009',
      '7-17-2009',
      '7-20-2009',
      '7-21-2009',
      '7-22-2009',
      '7-23-2009',
      '7-24-2009',
      '7-27-2009',
      '7-28-2009',
      '7-29-2009',
      '7-30-2009',
      '7-31-2009',
      '8-3-2009',
      '8-4-2009',
      '8-5-2009',
      '8-6-2009',
      '8-7-2009',
      '8-10-2009',
      '8-11-2009',
      '8-12-2009',
      '8-13-2009',
      '8-14-2009',
      '8-17-2009',
      '8-18-2009',
      '8-19-2009',
      '8-24-2009',
      '8-25-2009',
      '8-26-2009',
      '8-27-2009',
      '8-28-2009',
      '8-31-2009',
      '9-1-2009',
      '9-2-2009',
      '9-3-2009',
      '9-4-2009',
      '9-7-2009',
      '9-8-2009',
      '9-9-2009',
      '9-10-2009',
      '9-11-2009',
      '9-14-2009',
      '9-15-2009',
      '9-16-2009',
      '9-17-2009',
      '9-18-2009',
      '9-21-2009',
      '9-22-2009',
      '9-23-2009',
      '9-24-2009',
      '9-25-2009',
      '9-28-2009',
      '9-29-2009',
      '9-30-2009',
      '10-1-2009',
      '10-2-2009',
      '10-5-2009',
      '10-6-2009',
      '10-7-2009',
      '10-8-2009',
      '10-9-2009',
      '10-12-2009',
      '10-13-2009',
      '10-14-2009',
      '10-15-2009',
      '10-16-2009',
      '10-19-2009',
      '10-20-2009',
      '10-21-2009',
      '10-22-2009',
      '10-26-2009',
      '10-27-2009',
      '10-28-2009',
      '10-29-2009',
      '10-30-2009',
      '11-2-2009',
      '11-3-2009',
      '11-4-2009',
      '11-5-2009',
      '11-6-2009',
      '11-9-2009',
      '11-10-2009',
      '11-11-2009',
      '11-12-2009',
      '11-13-2009',
      '11-16-2009',
      '11-17-2009',
      '11-18-2009',
      '11-19-2009',
      '11-20-2009',
      '11-23-2009',
      '11-24-2009',
      '11-25-2009',
      '11-26-2009',
      '11-27-2009',
      '11-30-2009',
      '12-1-2009',
      '12-2-2009',
      '12-3-2009',
      '12-4-2009',
      '12-7-2009',
      '12-8-2009',
      '12-9-2009',
      '12-10-2009',
      '12-11-2009',
      '12-14-2009',
      '12-15-2009',
      '12-16-2009',
      '12-17-2009',
      '12-18-2009',
      '12-21-2009',
      '12-22-2009',
      '12-23-2009',
      '12-28-2009',
      '12-29-2009',
      '12-30-2009',
      '12-31-2009',
      '1-4-2010',
      '1-5-2010',
      '1-6-2010',
      '1-7-2010',
      '1-8-2010',
      '1-11-2010',
      '1-12-2010',
      '1-13-2010',
      '1-14-2010',
      '1-15-2010',
      '1-18-2010',
      '1-19-2010',
      '1-20-2010',
      '1-21-2010',
      '1-22-2010',
      '1-25-2010',
      '1-26-2010',
      '1-27-2010',
      '1-28-2010',
      '1-29-2010',
      '2-1-2010',
      '2-2-2010',
      '2-3-2010',
      '2-4-2010',
      '2-5-2010',
      '2-8-2010',
      '2-9-2010',
      '2-10-2010',
      '2-11-2010',
      '2-12-2010',
      '2-15-2010',
      '2-16-2010',
      '2-17-2010',
      '2-18-2010',
      '2-19-2010',
      '2-22-2010',
      '2-23-2010',
      '2-24-2010',
      '2-25-2010',
      '2-26-2010',
      '3-1-2010',
      '3-2-2010',
      '3-3-2010',
      '3-4-2010',
      '3-5-2010',
      '3-8-2010',
      '3-9-2010',
      '3-10-2010',
      '3-11-2010',
      '3-12-2010',
      '3-16-2010',
      '3-17-2010',
      '3-18-2010',
      '3-19-2010',
      '3-22-2010',
      '3-23-2010',
      '3-24-2010',
      '3-25-2010',
      '3-26-2010',
      '3-29-2010',
      '3-30-2010',
      '3-31-2010',
      '4-1-2010',
      '4-2-2010',
      '4-6-2010',
      '4-7-2010',
      '4-8-2010',
      '4-9-2010',
      '4-12-2010',
      '4-13-2010',
      '4-14-2010',
      '4-15-2010',
      '4-16-2010',
      '4-19-2010',
      '4-20-2010',
      '4-21-2010',
      '4-22-2010',
      '4-23-2010',
      '4-26-2010',
      '4-27-2010',
      '4-28-2010',
      '4-29-2010',
      '4-30-2010',
      '5-3-2010',
      '5-4-2010',
      '5-5-2010',
      '5-6-2010',
      '5-7-2010',
      '5-10-2010',
      '5-11-2010',
      '5-12-2010',
      '5-13-2010',
      '5-14-2010',
      '5-17-2010',
      '5-18-2010',
      '5-19-2010',
      '5-20-2010',
      '5-21-2010',
      '5-25-2010',
      '5-26-2010',
      '5-27-2010',
      '5-28-2010',
      '5-31-2010',
      '6-1-2010',
      '6-2-2010',
      '6-3-2010',
      '6-4-2010',
      '6-7-2010',
      '6-8-2010',
      '6-9-2010',
      '6-10-2010',
      '6-11-2010',
      '6-14-2010',
      '6-15-2010',
      '6-16-2010',
      '6-17-2010',
      '6-18-2010',
      '6-21-2010',
      '6-22-2010',
      '6-23-2010',
      '6-24-2010',
      '6-25-2010',
      '6-28-2010',
      '6-29-2010',
      '6-30-2010',
      '7-1-2010',
      '7-2-2010',
      '7-5-2010',
      '7-6-2010',
      '7-7-2010',
      '7-8-2010',
      '7-9-2010',
      '7-12-2010',
      '7-13-2010',
      '7-14-2010',
      '7-15-2010',
      '7-16-2010',
      '7-19-2010',
      '7-20-2010',
      '7-21-2010',
      '7-22-2010',
      '7-23-2010',
      '7-26-2010',
      '7-27-2010',
      '7-28-2010',
      '7-29-2010',
      '7-30-2010',
      '8-2-2010',
      '8-3-2010',
      '8-4-2010',
      '8-5-2010',
      '8-6-2010',
      '8-9-2010',
      '8-10-2010',
      '8-11-2010',
      '8-12-2010',
      '8-13-2010',
      '8-16-2010',
      '8-17-2010',
      '8-18-2010',
      '8-19-2010',
      '8-23-2010',
      '8-24-2010',
      '8-25-2010',
      '8-26-2010',
      '8-27-2010',
      '8-30-2010',
      '8-31-2010',
      '9-1-2010',
      '9-2-2010',
      '9-3-2010',
      '9-6-2010',
      '9-7-2010',
      '9-8-2010',
      '9-9-2010',
      '9-10-2010',
      '9-13-2010',
      '9-14-2010',
      '9-15-2010',
      '9-16-2010',
      '9-17-2010',
      '9-20-2010',
      '9-21-2010',
      '9-22-2010',
      '9-23-2010',
      '9-24-2010',
      '9-27-2010',
      '9-28-2010',
      '9-29-2010',
      '9-30-2010',
      '10-1-2010',
      '10-4-2010',
      '10-5-2010',
      '10-6-2010',
      '10-7-2010',
      '10-8-2010',
      '10-11-2010',
      '10-12-2010',
      '10-13-2010',
      '10-14-2010',
      '10-15-2010',
      '10-18-2010',
      '10-19-2010',
      '10-20-2010',
      '10-21-2010',
      '10-22-2010',
      '10-25-2010',
      '10-26-2010',
      '10-27-2010',
      '10-28-2010',
      '10-29-2010',
      '11-2-2010',
      '11-3-2010',
      '11-4-2010',
      '11-5-2010',
      '11-8-2010',
      '11-9-2010',
      '11-10-2010',
      '11-11-2010',
      '11-12-2010',
      '11-15-2010',
      '11-16-2010',
      '11-17-2010',
      '11-18-2010',
      '11-19-2010',
      '11-22-2010',
      '11-23-2010',
      '11-24-2010',
      '11-25-2010',
      '11-26-2010',
      '11-29-2010',
      '11-30-2010',
      '12-1-2010',
      '12-2-2010',
      '12-3-2010',
      '12-6-2010',
      '12-7-2010',
      '12-8-2010',
      '12-9-2010',
      '12-10-2010',
      '12-14-2010',
      '12-15-2010',
      '12-16-2010',
      '12-17-2010',
      '12-20-2010',
      '12-21-2010',
      '12-22-2010',
      '12-23-2010',
      '12-27-2010',
      '12-28-2010',
      '12-29-2010',
      '12-30-2010',
      '12-31-2010',
      '1-3-2011',
      '1-4-2011',
      '1-5-2011',
      '1-6-2011',
      '1-7-2011',
      '1-10-2011',
      '1-11-2011',
      '1-12-2011',
      '1-13-2011',
      '1-14-2011',
      '1-17-2011',
      '1-18-2011',
      '1-19-2011',
      '1-20-2011',
      '1-24-2011',
      '1-25-2011',
      '1-26-2011',
      '1-27-2011',
      '1-28-2011',
      '1-31-2011',
      '2-1-2011',
      '2-2-2011',
      '2-3-2011',
      '2-4-2011',
      '2-7-2011',
      '2-8-2011',
      '2-9-2011',
      '2-10-2011',
      '2-11-2011',
      '2-14-2011',
      '2-15-2011',
      '2-16-2011',
      '2-17-2011',
      '2-18-2011',
      '2-21-2011',
      '2-22-2011',
      '2-23-2011',
      '2-24-2011',
      '2-25-2011',
      '2-28-2011',
      '3-1-2011',
      '3-2-2011',
      '3-3-2011',
      '3-4-2011',
      '3-7-2011',
      '3-8-2011',
      '3-9-2011',
      '3-10-2011',
      '3-11-2011',
      '3-16-2011',
      '3-17-2011',
      '3-18-2011',
      '3-21-2011',
      '3-22-2011',
      '3-23-2011',
      '3-24-2011',
      '3-25-2011',
      '3-28-2011',
      '3-29-2011',
      '3-30-2011',
      '3-31-2011',
      '4-1-2011',
      '4-4-2011',
      '4-5-2011',
      '4-6-2011',
      '4-7-2011',
      '4-8-2011',
      '4-11-2011',
      '4-12-2011',
      '4-13-2011',
      '4-14-2011',
      '4-15-2011',
      '4-18-2011',
      '4-19-2011',
      '4-20-2011',
      '4-21-2011',
      '4-22-2011',
      '4-26-2011',
      '4-27-2011',
      '4-28-2011',
      '4-29-2011',
      '5-2-2011',
      '5-3-2011',
      '5-4-2011',
      '5-5-2011',
      '5-6-2011',
      '5-9-2011',
      '5-10-2011',
      '5-11-2011',
      '5-12-2011',
      '5-13-2011',
      '5-16-2011',
      '5-17-2011',
      '5-18-2011',
      '5-19-2011',
      '5-20-2011',
      '5-23-2011',
      '5-24-2011',
      '5-25-2011',
      '5-26-2011',
      '5-27-2011',
      '5-30-2011',
      '5-31-2011',
      '6-1-2011',
      '6-2-2011',
      '6-3-2011',
      '6-6-2011',
      '6-7-2011',
      '6-8-2011',
      '6-9-2011',
      '6-10-2011',
      '6-14-2011',
      '6-15-2011',
      '6-16-2011',
      '6-17-2011',
      '6-20-2011',
      '6-21-2011',
      '6-22-2011',
      '6-23-2011',
      '6-24-2011',
      '6-27-2011',
      '6-28-2011',
      '6-29-2011',
      '6-30-2011',
      '7-1-2011',
      '7-4-2011',
      '7-5-2011',
      '7-6-2011',
      '7-7-2011',
      '7-8-2011',
      '7-11-2011',
      '7-12-2011',
      '7-13-2011',
      '7-14-2011',
      '7-15-2011',
      '7-18-2011',
      '7-19-2011',
      '7-20-2011',
      '7-21-2011',
      '7-22-2011',
      '7-25-2011',
      '7-26-2011',
      '7-27-2011',
      '7-28-2011',
      '7-29-2011',
      '8-1-2011',
      '8-2-2011',
      '8-3-2011',
      '8-4-2011',
      '8-5-2011',
      '8-8-2011',
      '8-9-2011',
      '8-10-2011',
      '8-11-2011',
      '8-12-2011',
      '8-15-2011',
      '8-16-2011',
      '8-17-2011',
      '8-18-2011',
      '8-19-2011',
      '8-22-2011',
      '8-23-2011',
      '8-24-2011',
      '8-25-2011',
      '8-26-2011',
      '8-29-2011',
      '8-30-2011',
      '8-31-2011',
      '9-1-2011',
      '9-2-2011',
      '9-5-2011',
      '9-6-2011',
      '9-7-2011',
      '9-8-2011',
      '9-9-2011',
      '9-12-2011',
      '9-13-2011',
      '9-14-2011',
      '9-15-2011',
      '9-16-2011',
      '9-19-2011',
      '9-20-2011',
      '9-21-2011',
      '9-22-2011',
      '9-23-2011',
      '9-26-2011',
      '9-27-2011',
      '9-28-2011',
      '9-29-2011',
      '9-30-2011',
      '10-3-2011',
      '10-4-2011',
      '10-5-2011',
      '10-6-2011',
      '10-7-2011',
      '10-10-2011',
      '10-11-2011',
      '10-12-2011',
      '10-13-2011',
      '10-14-2011',
      '10-17-2011',
      '10-18-2011',
      '10-19-2011',
      '10-20-2011',
      '10-21-2011',
      '10-24-2011',
      '10-25-2011',
      '10-26-2011',
      '10-27-2011',
      '10-28-2011',
      '11-2-2011',
      '11-3-2011',
      '11-4-2011',
      '11-7-2011',
      '11-8-2011',
      '11-9-2011',
      '11-10-2011',
      '11-11-2011',
      '11-14-2011',
      '11-15-2011',
      '11-16-2011',
      '11-17-2011',
      '11-18-2011',
      '11-21-2011',
      '11-22-2011',
      '11-23-2011',
      '11-24-2011',
      '11-25-2011',
      '11-28-2011',
      '11-29-2011',
      '11-30-2011',
      '12-1-2011',
      '12-2-2011',
      '12-5-2011',
      '12-6-2011',
      '12-7-2011',
      '12-8-2011',
      '12-9-2011',
      '12-12-2011',
      '12-13-2011',
      '12-14-2011',
      '12-15-2011',
      '12-16-2011',
      '12-19-2011',
      '12-20-2011',
      '12-21-2011',
      '12-22-2011',
      '12-23-2011',
      '12-27-2011',
      '12-28-2011',
      '12-29-2011',
      '12-30-2011',
      '1-2-2012',
      '1-3-2012',
      '1-4-2012',
      '1-5-2012',
      '1-6-2012',
      '1-9-2012',
      '1-10-2012',
      '1-11-2012',
      '1-12-2012',
      '1-13-2012',
      '1-16-2012',
      '1-17-2012',
      '1-18-2012',
      '1-19-2012',
      '1-20-2012',
      '1-23-2012',
      '1-24-2012',
      '1-25-2012',
      '1-26-2012',
      '1-27-2012',
      '1-30-2012',
      '1-31-2012',
      '2-1-2012',
      '2-2-2012',
      '2-3-2012',
      '2-6-2012',
      '2-7-2012',
      '2-8-2012',
      '2-9-2012',
      '2-10-2012',
      '2-13-2012',
      '2-14-2012',
      '2-15-2012',
      '2-16-2012',
      '2-17-2012',
      '2-20-2012',
      '2-21-2012',
      '2-22-2012',
      '2-23-2012',
      '2-24-2012',
      '2-27-2012',
      '2-28-2012',
      '2-29-2012',
      '3-1-2012',
      '3-2-2012',
      '3-5-2012',
      '3-6-2012',
      '3-7-2012',
      '3-8-2012',
      '3-9-2012',
      '3-12-2012',
      '3-13-2012',
      '3-14-2012',
      '3-19-2012',
      '3-20-2012',
      '3-21-2012',
      '3-22-2012',
      '3-23-2012',
      '3-26-2012',
      '3-27-2012',
      '3-28-2012',
      '3-29-2012',
      '3-30-2012',
      '4-2-2012',
      '4-3-2012',
      '4-4-2012',
      '4-5-2012',
      '4-6-2012',
      '4-10-2012',
      '4-11-2012',
      '4-12-2012',
      '4-13-2012',
      '4-16-2012',
      '4-17-2012',
      '4-18-2012',
      '4-19-2012',
      '4-20-2012',
      '4-23-2012',
      '4-24-2012',
      '4-25-2012',
      '4-26-2012',
      '4-27-2012',
      '5-2-2012',
      '5-3-2012',
      '5-4-2012',
      '5-7-2012',
      '5-8-2012',
      '5-9-2012',
      '5-10-2012',
      '5-11-2012',
      '5-14-2012',
      '5-15-2012',
      '5-16-2012',
      '5-17-2012',
      '5-18-2012',
      '5-21-2012',
      '5-22-2012',
      '5-23-2012',
      '5-24-2012',
      '5-25-2012',
      '5-29-2012',
      '5-30-2012',
      '5-31-2012',
      '6-1-2012',
      '6-4-2012',
      '6-5-2012',
      '6-6-2012',
      '6-7-2012',
      '6-8-2012',
      '6-11-2012',
      '6-12-2012',
      '6-13-2012',
      '6-14-2012',
      '6-15-2012',
      '6-18-2012',
      '6-19-2012',
      '6-20-2012',
      '6-21-2012',
      '6-22-2012',
      '6-25-2012',
      '6-26-2012',
      '6-27-2012',
      '6-28-2012',
      '6-29-2012',
      '7-2-2012',
      '7-3-2012',
      '7-4-2012',
      '7-5-2012',
      '7-6-2012',
      '7-9-2012',
      '7-10-2012',
      '7-11-2012',
      '7-12-2012',
      '7-13-2012',
      '7-16-2012',
      '7-17-2012',
      '7-18-2012',
      '7-19-2012',
      '7-20-2012',
      '7-23-2012',
      '7-24-2012',
      '7-25-2012',
      '7-26-2012',
      '7-27-2012',
      '7-30-2012',
      '7-31-2012',
      '8-1-2012',
      '8-2-2012',
      '8-3-2012',
      '8-6-2012',
      '8-7-2012',
      '8-8-2012',
      '8-9-2012',
      '8-10-2012',
      '8-13-2012',
      '8-14-2012',
      '8-15-2012',
      '8-16-2012',
      '8-17-2012',
      '8-21-2012',
      '8-22-2012',
      '8-23-2012',
      '8-24-2012',
      '8-27-2012',
      '8-28-2012',
      '8-29-2012',
      '8-30-2012',
      '8-31-2012',
      '9-3-2012',
      '9-4-2012',
      '9-5-2012',
      '9-6-2012',
      '9-7-2012',
      '9-10-2012',
      '9-11-2012',
      '9-12-2012',
      '9-13-2012',
      '9-14-2012',
      '9-17-2012',
      '9-18-2012',
      '9-19-2012',
      '9-20-2012',
      '9-21-2012',
      '9-24-2012',
      '9-25-2012',
      '9-26-2012',
      '9-27-2012',
      '9-28-2012',
      '10-1-2012',
      '10-2-2012',
      '10-3-2012',
      '10-4-2012',
      '10-5-2012',
      '10-8-2012',
      '10-9-2012',
      '10-10-2012',
      '10-11-2012',
      '10-12-2012',
      '10-15-2012',
      '10-16-2012',
      '10-17-2012',
      '10-18-2012',
      '10-19-2012',
      '10-24-2012',
      '10-25-2012',
      '10-26-2012',
      '10-29-2012',
      '10-30-2012',
      '10-31-2012',
      '11-5-2012',
      '11-6-2012',
      '11-7-2012',
      '11-8-2012',
      '11-9-2012',
      '11-12-2012',
      '11-13-2012',
      '11-14-2012',
      '11-15-2012',
      '11-16-2012',
      '11-19-2012',
      '11-20-2012',
      '11-21-2012',
      '11-22-2012',
      '11-23-2012',
      '11-26-2012',
      '11-27-2012',
      '11-28-2012',
      '11-29-2012',
      '11-30-2012',
      '12-3-2012',
      '12-4-2012',
      '12-5-2012',
      '12-6-2012',
      '12-7-2012',
      '12-10-2012',
      '12-11-2012',
      '12-12-2012',
      '12-13-2012',
      '12-14-2012',
      '12-17-2012',
      '12-18-2012',
      '12-19-2012',
      '12-20-2012',
      '12-21-2012',
      '12-27-2012',
      '12-28-2012',
      '1-2-2013',
      '1-3-2013',
      '1-4-2013',
      '1-7-2013',
      '1-8-2013',
      '1-9-2013',
      '1-10-2013',
      '1-11-2013',
      '1-14-2013',
      '1-15-2013',
      '1-16-2013',
      '1-17-2013',
      '1-18-2013',
      '1-21-2013',
      '1-22-2013',
      '1-23-2013',
      '1-24-2013',
      '1-25-2013',
      '1-28-2013',
      '1-29-2013',
      '1-30-2013',
      '1-31-2013',
      '2-1-2013',
      '2-4-2013',
      '2-5-2013',
      '2-6-2013',
      '2-7-2013',
      '2-8-2013',
      '2-11-2013',
      '2-12-2013',
      '2-13-2013',
      '2-14-2013',
      '2-15-2013',
      '2-18-2013',
      '2-19-2013',
      '2-20-2013',
      '2-21-2013',
      '2-22-2013',
      '2-25-2013',
      '2-26-2013',
      '2-27-2013',
      '2-28-2013',
      '3-1-2013',
      '3-4-2013',
      '3-5-2013',
      '3-6-2013',
      '3-7-2013',
      '3-8-2013',
      '3-11-2013',
      '3-12-2013',
      '3-13-2013',
      '3-14-2013',
      '3-18-2013',
      '3-19-2013',
      '3-20-2013',
      '3-21-2013',
      '3-22-2013',
      '3-25-2013',
      '3-26-2013',
      '3-27-2013',
      '3-28-2013',
      '3-29-2013',
      '4-2-2013',
      '4-3-2013',
      '4-4-2013',
      '4-5-2013',
      '4-8-2013',
      '4-9-2013',
      '4-10-2013',
      '4-11-2013',
      '4-12-2013',
      '4-15-2013',
      '4-16-2013',
      '4-17-2013',
      '4-18-2013',
      '4-19-2013',
      '4-22-2013',
      '4-23-2013',
      '4-24-2013',
      '4-25-2013',
      '4-26-2013',
      '4-29-2013',
      '4-30-2013',
      '5-2-2013',
      '5-3-2013',
      '5-6-2013',
      '5-7-2013',
      '5-8-2013',
      '5-9-2013',
      '5-10-2013',
      '5-13-2013',
      '5-14-2013',
      '5-15-2013',
      '5-16-2013',
      '5-17-2013',
      '5-21-2013',
      '5-22-2013',
      '5-23-2013',
      '5-24-2013',
      '5-27-2013',
      '5-28-2013',
      '5-29-2013',
      '5-30-2013',
      '5-31-2013',
      '6-3-2013',
      '6-4-2013',
      '6-5-2013',
      '6-6-2013',
      '6-7-2013',
      '6-10-2013',
      '6-11-2013',
      '6-12-2013',
      '6-13-2013',
      '6-14-2013',
      '6-17-2013',
      '6-18-2013',
      '6-19-2013',
      '6-20-2013',
      '6-21-2013',
      '6-24-2013',
      '6-25-2013',
      '6-26-2013',
      '6-27-2013',
      '6-28-2013',
      '7-1-2013',
      '7-2-2013',
      '7-3-2013',
      '7-4-2013',
      '7-5-2013',
      '7-8-2013',
      '7-9-2013',
      '7-10-2013',
      '7-11-2013',
      '7-12-2013',
      '7-15-2013',
      '7-16-2013',
      '7-17-2013',
      '7-18-2013',
      '7-19-2013',
      '7-22-2013',
      '7-23-2013',
      '7-24-2013',
      '7-25-2013',
      '7-26-2013',
      '7-29-2013',
      '7-30-2013',
      '7-31-2013',
      '8-1-2013',
      '8-2-2013',
      '8-5-2013',
      '8-6-2013',
      '8-7-2013',
      '8-8-2013',
      '8-9-2013',
      '8-12-2013',
      '8-13-2013',
      '8-14-2013',
      '8-15-2013',
      '8-16-2013',
      '8-21-2013',
      '8-22-2013',
      '8-23-2013',
      '8-26-2013',
      '8-27-2013',
      '8-28-2013',
      '8-29-2013',
      '8-30-2013',
      '9-2-2013',
      '9-3-2013',
      '9-4-2013',
      '9-5-2013',
      '9-6-2013',
      '9-9-2013',
      '9-10-2013',
      '9-11-2013',
      '9-12-2013',
      '9-13-2013',
      '9-16-2013',
      '9-17-2013',
      '9-18-2013',
      '9-19-2013',
      '9-20-2013',
      '9-23-2013',
      '9-24-2013',
      '9-25-2013',
      '9-26-2013',
      '9-27-2013',
      '9-30-2013',
      '10-1-2013',
      '10-2-2013',
      '10-3-2013',
      '10-4-2013',
      '10-7-2013',
      '10-8-2013',
      '10-9-2013',
      '10-10-2013',
      '10-11-2013',
      '10-14-2013',
      '10-15-2013',
      '10-16-2013',
      '10-17-2013',
      '10-18-2013',
      '10-21-2013',
      '10-22-2013',
      '10-24-2013',
      '10-25-2013',
      '10-28-2013',
      '10-29-2013',
      '10-30-2013',
      '10-31-2013',
      '11-4-2013',
      '11-5-2013',
      '11-6-2013',
      '11-7-2013',
      '11-8-2013',
      '11-11-2013',
      '11-12-2013',
      '11-13-2013',
      '11-14-2013',
    ];
    const alldata = testdata.map((d, i) => ({ close: d, date: testdates[i] })) as HistoricalData[];
    setTest([
      {
        ticker: 'TEST',
        ...calculateSharpeFromData(
          alldata,
          'TEST',
          lookback
        ),
        loading: false,
      },
    ]);
  }, [lookback, setTest, calculateSharpeFromData]);


  useEffect(() => {
    calculateSharpe(tickers, lookback)
      .then(sharpeRatios => setResults(sharpeRatios));
  }, [tickers, lookback, calculateSharpe]);

  const lookbackOptions = [62, 125, 250, 500] as const;
  const lookbackLabels: Record<number, string> = {
    62: '3 months',
    125: '6 months',
    250: '1 year',
    500: '2 years',
  };
  const lookbackIndex = lookbackOptions.indexOf(
    lookback as (typeof lookbackOptions)[number]
  );

  useEffect(() => {
    if (lookbackIndex === -1) {
      setLookback(lookbackOptions[lookbackOptions.length - 1]);
    }
  }, [lookbackIndex, setLookback]);

  const handleLookbackChange = (value: string) => {
    const nextIndex = Number(value);
    if (Number.isNaN(nextIndex) || nextIndex < 0 || nextIndex >= lookbackOptions.length) {
      return;
    }
    setLookback(lookbackOptions[nextIndex]);
  };

  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === 'Enter' && tickerInput.trim()) {
      addTicker(tickerInput);
      setTickerInput('');
    }
  };

  if (!mounted) {
    return null;
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-950 to-slate-900 p-8">
      <div className="mx-auto">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-4xl font-bold text-white mb-2">
            Sharpe Ratio Calculator
          </h1>
          <p className="text-slate-400">
            Track Sharpe ratios across different time periods (Risk-free rate: 4.5%)
          </p>
        </div>

        {/* Input and Table Card */}
        <Card className="border-slate-700 bg-slate-800">
          <CardHeader>
            <CardTitle className="text-white">Ticker Performance</CardTitle>
            <CardDescription>
              Enter ticker symbols to calculate their Sharpe ratios
            </CardDescription>
          </CardHeader>
          <CardContent>
            {/* Input Field */}
            <div className="mb-6 grid gap-4 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)]">
              <div className="rounded-lg border border-slate-700/60 bg-slate-900/30 p-4">
                <label className="mb-2 block text-sm text-slate-400">
                  Ticker input
                </label>
                <div className="mb-2 flex items-center justify-between text-xs text-slate-500">
                  <span>Press Enter to add</span>
                  <span>One ticker at a time</span>
                </div>
                <Input
                  placeholder="Enter ticker (e.g., AAPL)"
                  value={tickerInput}
                  onChange={(e) => setTickerInput(e.target.value)}
                  onKeyPress={handleKeyPress}
                  className="h-11 bg-slate-700/80 border-slate-600 text-white placeholder:text-slate-400"
                />
              </div>
              <div className="rounded-lg border border-slate-700/60 bg-slate-900/30 p-4">
                <label className="mb-2 block text-sm text-slate-400">
                  Lookback (days)
                </label>
                <div className="mb-2 flex items-center justify-between text-xs text-slate-500">
                  <span>{lookback}</span>
                  <span>{lookbackLabels[lookback] ?? ''}</span>
                </div>
                <input
                  type="range"
                  min={0}
                  max={lookbackOptions.length - 1}
                  step={1}
                  value={Math.max(0, lookbackIndex)}
                  onChange={(e) => handleLookbackChange(e.target.value)}
                  className="w-full accent-blue-500"
                />
                <div className="mt-2 flex justify-between text-xs text-slate-400">
                  {lookbackOptions.map((value) => (
                    <div key={value} className="flex flex-col items-center">
                      <span>{value}</span>
                      <span className="text-[10px] text-slate-500">
                        {lookbackLabels[value] ?? ''}
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            {/* Table */}
            {[...test, ...tickers].length > 0 ? (
              <div className="overflow-x-auto">
                <Table className="table-fixed">
                  <TableHeader>
                    <TableRow className="border-slate-700 hover:bg-slate-700">
                      <TableHead className="text-slate-300 font-semibold w-24">
                        Ticker
                      </TableHead>
                      <TableHead className="text-slate-300 font-semibold text-right w-32">
                        <abbr title="Daily">D</abbr>
                      </TableHead>
                      <TableHead className="text-slate-400 text-right w-32">
                        <abbr title="Weekly">W</abbr>
                      </TableHead>
                      <TableHead className="text-slate-400 text-right w-32">
                        <abbr title="Monthly">M</abbr>
                      </TableHead>
                      <TableHead className="text-slate-400 text-right w-32">
                        <abbr title="Quarterly">Q</abbr>
                      </TableHead>
                      <TableHead className="text-slate-400 text-right w-32">
                        <abbr title="Semiannual">S</abbr>
                      </TableHead>
                      <TableHead className="text-slate-400 text-right w-32">
                        <abbr title="Yearly">Y</abbr>
                      </TableHead>
                    </TableRow>
                  </TableHeader>
                  <TableBody>
                    {[...test, ...results].map((result) => (
                      <TableRow
                        key={result.ticker}
                        className="border-slate-700 hover:bg-slate-700"
                      >
                        <TableCell className="font-medium text-slate-200">
                          <div className="flex items-center gap-2">
                            <button
                              onClick={() => removeTicker(result.ticker)}
                              className="text-slate-400 hover:text-red-400 transition-colors"
                              aria-label={`Remove ${result.ticker}`}
                            >
                              <X className="h-4 w-4" />
                            </button>
                            <span>{result.ticker}</span>
                          </div>
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : result.error ? (
                            <span className="text-red-400 text-xs">Error</span>
                          ) : (
                            <span className="text-slate-200 font-semibold">
                              {result.yesterday}
                            </span>
                          )}
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : (
                            <span className="text-slate-300">
                              {result.lastWeek}
                            </span>
                          )}
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : (
                            <span className="text-slate-300">
                              {result.lastMonth}
                            </span>
                          )}
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : (
                            <span className="text-slate-300">
                              {result.lastQuarter}
                            </span>
                          )}
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : (
                            <span className="text-slate-300">
                              {result.lastSemester}
                            </span>
                          )}
                        </TableCell>
                        <TableCell className="text-right">
                          {result.loading ? (
                            <Skeleton className="h-5 w-full bg-slate-700" />
                          ) : (
                            <span className="text-slate-300">
                              {result.lastYear}
                            </span>
                          )}
                        </TableCell>
                      </TableRow>
                    ))}
                  </TableBody>
                </Table>
              </div>
            ) : (
              <div className="text-center py-12">
                <p className="text-slate-400">
                  Enter a ticker symbol above to get started
                </p>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
